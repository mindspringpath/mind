(()=>{var e={};e.id=355,e.ids=[355],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4691:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(7256),s(8075),s(5866);var n=s(3191),i=s(8716),a=s(7922),o=s.n(a),r=s(5231),l={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>r[e]);s.d(t,l);let c=["",{children:["booking",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7256)),"C:\\Users\\uocxx\\Documents\\Web\\MindSpring\\app\\booking\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8075)),"C:\\Users\\uocxx\\Documents\\Web\\MindSpring\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\uocxx\\Documents\\Web\\MindSpring\\app\\booking\\page.tsx"],m="/booking/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/booking/page",pathname:"/booking",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1573:(e,t,s)=>{Promise.resolve().then(s.bind(s,5659)),Promise.resolve().then(s.bind(s,4503)),Promise.resolve().then(s.t.bind(s,9404,23))},5659:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(326),i=s(7577),a=s(3116),o=s(772),r=s(5047);function l(){let e=(0,r.useRouter)(),[t,s]=(0,i.useState)(null),[l,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(!1),[u,p]=(0,i.useState)({fullName:"",email:"",phone:"",notes:"",date:"",time:"",sessionType:"Initial Consultation"}),x=e=>{let{name:t,value:s}=e.target;p(e=>({...e,[t]:s}))},h=async t=>{if(t.preventDefault(),!d){m(!0);try{let t=await (0,a.ts)();if(!u.date||!u.time){alert("Please select a date and time."),m(!1);return}let{data:s,error:n}=await a.OQ.from("appointments").select("id").eq("date",u.date).eq("time",u.time).neq("status","cancelled");if(n)throw n;if(s&&s.length>0){alert("This time slot is already booked. Please choose another time."),m(!1);return}let i={user_id:t?.id||null,full_name:u.fullName,email:u.email,phone:u.phone,notes:u.notes,date:u.date,time:u.time,session_type:u.sessionType,status:"pending",updated_at:new Date().toISOString()},{data:o,error:r}=await a.OQ.from("appointments").insert(i).select("*").single();if(r||!o)throw r||Error("Insert failed");await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"booking_created",appointment:o})}),e.push("/booking/success")}catch(e){alert("Something went wrong while booking your session.")}finally{m(!1)}}};return(0,n.jsxs)("form",{onSubmit:h,className:"space-y-6 bg-charcoal p-6 rounded-xl border border-graphite",children:[n.jsx("h2",{className:"text-2xl font-bold text-softwhite mb-4",children:"Book Your Session"}),l&&n.jsx("div",{className:"text-softwhite/60 text-sm",children:"Loading your details..."}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Full Name"}),n.jsx("input",{type:"text",name:"fullName",value:u.fullName,onChange:x,required:!0,className:"input-mindspring"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:u.email,onChange:x,required:!0,className:"input-mindspring"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Phone"}),n.jsx("input",{type:"text",name:"phone",value:u.phone,onChange:x,className:"input-mindspring"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Date"}),n.jsx("input",{type:"date",name:"date",value:u.date,onChange:x,required:!0,className:"input-mindspring"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Time"}),n.jsx("input",{type:"time",name:"time",value:u.time,onChange:x,required:!0,className:"input-mindspring"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Session Type"}),(0,n.jsxs)("select",{name:"sessionType",value:u.sessionType,onChange:x,className:"input-mindspring",children:[n.jsx("option",{children:"Initial Consultation"}),n.jsx("option",{children:"Follow-Up Session"}),n.jsx("option",{children:"12-Week Program Session"})]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Notes (optional)"}),n.jsx("textarea",{name:"notes",value:u.notes,onChange:x,className:"input-mindspring h-24"})]}),n.jsx(o.z,{type:"submit",disabled:d,className:"btn-mindspring-primary w-full py-3",children:d?"Booking...":"Confirm Booking"})]})}},5047:(e,t,s)=>{"use strict";var n=s(7389);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},7256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var n=s(9510),i=s(8585),a=s(4419),o=s(8570);let r=(0,o.createProxy)(String.raw`C:\Users\uocxx\Documents\Web\MindSpring\components\booking\BookingForm.tsx`),{__esModule:l,$$typeof:c}=r;r.default;let d=(0,o.createProxy)(String.raw`C:\Users\uocxx\Documents\Web\MindSpring\components\booking\BookingForm.tsx#default`);function m(){return(0,n.jsxs)("div",{className:"min-h-screen bg-charcoal",children:[n.jsx(i.ZP,{}),n.jsx("main",{className:"py-12",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-softwhite mb-4 tracking-tight",children:"Book Your Session"}),n.jsx("p",{className:"text-lg md:text-xl text-softwhite/70",children:"Schedule your evidence-based coaching session"})]}),n.jsx(d,{})]})}),n.jsx(a.Z,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[948,509,157,688,624,975],()=>s(4691));module.exports=n})();