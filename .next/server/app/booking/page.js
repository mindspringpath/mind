(()=>{var e={};e.id=355,e.ids=[355],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4691:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>p}),s(7256),s(8075),s(5866);var r=s(3191),n=s(8716),i=s(7922),o=s.n(i),a=s(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let p=["",{children:["booking",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7256)),"C:\\Users\\uocxx\\Documents\\Web\\MindSpring\\app\\booking\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8075)),"C:\\Users\\uocxx\\Documents\\Web\\MindSpring\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\uocxx\\Documents\\Web\\MindSpring\\app\\booking\\page.tsx"],c="/booking/page",d={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/booking/page",pathname:"/booking",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},1573:(e,t,s)=>{Promise.resolve().then(s.bind(s,5659)),Promise.resolve().then(s.bind(s,4503)),Promise.resolve().then(s.t.bind(s,9404,23))},5659:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var r=s(326),n=s(7577),i=s(3116),o=s(772),a=s(5047),l=s(7429);function p(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)(null),[p,u]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)({fullName:"",email:"",phone:"",notes:"",date:"",time:"",sessionType:"Initial Consultation"}),h=e=>{let{name:t,value:s}=e.target;x(e=>({...e,[t]:s}))},g=async t=>{t.preventDefault(),d(!0);try{let t=await (0,i.ts)(),{data:s,error:r}=await i.OQ.from("appointments").select("id").eq("date",m.date).eq("time",m.time).neq("status","cancelled");if(r)throw r;if(s&&s.length>0){alert("This time slot is already booked. Please choose another time."),d(!1);return}let{data:n,error:o}=await i.OQ.from("appointments").insert({user_id:t?.id||null,full_name:m.fullName,email:m.email,phone:m.phone,notes:m.notes,date:m.date,time:m.time,session_type:m.sessionType,status:"pending"});if(o)throw o;await (0,l.C)({to:m.email,subject:"Your MindSpring Path Session is Booked",html:`
          <h2>Your session is confirmed</h2>
          <p><strong>Session Type:</strong> ${m.sessionType}</p>
          <p><strong>Date:</strong> ${m.date}</p>
          <p><strong>Time:</strong> ${m.time}</p>
          <br/>
          <p>We look forward to supporting your journey.</p>
          <p>MindSpring Path</p>
        `}),await (0,l.C)({to:"info@mindspringpath.com.au",subject:"New Appointment Booked",html:`
          <h2>New Booking</h2>
          <p><strong>Name:</strong> ${m.fullName}</p>
          <p><strong>Email:</strong> ${m.email}</p>
          <p><strong>Phone:</strong> ${m.phone}</p>
          <p><strong>Session:</strong> ${m.sessionType}</p>
          <p><strong>Date:</strong> ${m.date}</p>
          <p><strong>Time:</strong> ${m.time}</p>
        `}),e.push("/booking/success")}catch(e){alert("Something went wrong while booking your session.")}d(!1)};return(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6 bg-charcoal p-6 rounded-xl border border-graphite",children:[r.jsx("h2",{className:"text-2xl font-bold text-softwhite mb-4",children:"Book Your Session"}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Full Name"}),r.jsx("input",{type:"text",name:"fullName",value:m.fullName,onChange:h,required:!0,className:"input-mindspring"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:m.email,onChange:h,required:!0,className:"input-mindspring"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Phone"}),r.jsx("input",{type:"text",name:"phone",value:m.phone,onChange:h,className:"input-mindspring"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Date"}),r.jsx("input",{type:"date",name:"date",value:m.date,onChange:h,required:!0,className:"input-mindspring"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Time"}),r.jsx("input",{type:"time",name:"time",value:m.time,onChange:h,required:!0,className:"input-mindspring"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Session Type"}),(0,r.jsxs)("select",{name:"sessionType",value:m.sessionType,onChange:h,className:"input-mindspring",children:[r.jsx("option",{children:"Initial Consultation"}),r.jsx("option",{children:"Follow-Up Session"}),r.jsx("option",{children:"12-Week Program Session"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-softwhite/80 mb-1",children:"Notes (optional)"}),r.jsx("textarea",{name:"notes",value:m.notes,onChange:h,className:"input-mindspring h-24"})]}),r.jsx(o.z,{type:"submit",disabled:c,className:"btn-mindspring-primary w-full py-3",children:c?"Booking...":"Confirm Booking"})]})}},7429:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var r=s(2466);let n=`
  <br/><br/>
  <p style="font-size: 12px; color: #888;">
    You received this email because your address was provided when booking or managing a session with MindSpring Path.
    If you believe this was sent in error, please disregard it or contact us at info@mindspringpath.com.au.
  </p>
`;async function i({to:e,subject:t,html:s}){let i=r.createTransport({host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),secure:!0,auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASS}});await i.sendMail({from:`"MindSpring Path" <${process.env.SMTP_USER}>`,to:e,subject:t,html:s+n})}},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(9510),n=s(8585),i=s(4419),o=s(8570);let a=(0,o.createProxy)(String.raw`C:\Users\uocxx\Documents\Web\MindSpring\components\booking\BookingForm.tsx`),{__esModule:l,$$typeof:p}=a;a.default;let u=(0,o.createProxy)(String.raw`C:\Users\uocxx\Documents\Web\MindSpring\components\booking\BookingForm.tsx#default`);function c(){return(0,r.jsxs)("div",{className:"min-h-screen bg-charcoal",children:[r.jsx(n.ZP,{}),r.jsx("main",{className:"py-12",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-softwhite mb-4 tracking-tight",children:"Book Your Session"}),r.jsx("p",{className:"text-lg md:text-xl text-softwhite/70",children:"Schedule your evidence-based coaching session"})]}),r.jsx(u,{})]})}),r.jsx(i.Z,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[681,157,688,624,466,975],()=>s(4691));module.exports=r})();